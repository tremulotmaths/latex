%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                               %
%    		 pas-doc.sty         encodage : UTF8     	        %
%                                                               %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                               %
%           	Créé par Stéphane PASQUET 		          		%
%                                                               %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Objet :  Outils pour la création de documentations

% Informations générales
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pas-doc}[2011/01/31]

% <------------------------------- Chargement des extensions ----------------------------------->
\RequirePackage[latin1]{inputenc}
\RequirePackage[frenchb]{babel}
\RequirePackage[T1]{fontenc}
\RequirePackage{listings,textcomp}
\RequirePackage[colorlinks=true,urlcolor=blue]{hyperref}
\RequirePackage[vmargin=2cm,hmargin=2cm]{geometry}
\RequirePackage[svgnames,table]{xcolor}
\RequirePackage{tikz}
\RequirePackage{fourier}
\RequirePackage{aurical}
\RequirePackage{titlesec}


% <------------------------------- Paramètres globaux ----------------------------------->
\author{St\'ephane PASQUET \\ \href{http://www.mathweb.fr}{http://www.mathweb.fr} \\ \href{mailto:contact@mathweb.fr}{contact@mathweb.fr}}
\date{\today}
\setlength{\parindent}{0cm}
\pagecolor{LemonChiffon!50}

% <------------------------------- TITRE ----------------------------------->

\newcommand*{\head}
{%
	\begin{tikzpicture}
   \node[rounded corners,fill=Moccasin,text=DarkRed,draw=DarkRed,very thick,minimum width=.95\textwidth,rectangle] (titre) {
	   \begin{minipage}{.95\textwidth}
		   \centering\Large\bfseries
		   \maketitle
	   \end{minipage}
   };
   \end{tikzpicture}
}

\newcommand{\sectiontoccolor}{DarkRed}
\newcommand{\subsectiontoccolor}{Green}
\newcommand{\subsubsectiontoccolor}{DodgerBlue}

% <------------------------------- TABLE DES MATIERES ----------------------------------->

\def\@dottedtocline#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
     \parindent #2\relax\@afterindenttrue
     \interlinepenalty\@M
     \leavevmode
     \@tempdima #3\relax
     \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
     {#4}\nobreak
     \leaders\hbox{$\m@th
        \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
        mu$}\hfill
     \nobreak
     \hb@xt@\@pnumwidth{\hfil\normalfont #5}%
     \par}%
  \fi}

\renewcommand*\l@section{\color{\sectiontoccolor}\def\@linkcolor{\sectiontoccolor}\@dottedtocline{1}{1.5em}{2.3em}}
\renewcommand*\l@subsection{\color{\subsectiontoccolor}\def\@linkcolor{\subsectiontoccolor}\@dottedtocline{1}{2.3em}{2.6em}}
\renewcommand*\l@subsubsection{\color{\subsubsectiontoccolor}\def\@linkcolor{\subsubsectiontoccolor}\@dottedtocline{1}{2.6em}{3em}}

\def\contentsline#1#2#3#4{%
  \ifx\\#4\\%
    \csname l@#1\endcsname{#2}{#3}%
  \else
      \csname l@#1\endcsname{\hyper@linkstart{link}{#4}{#2}\hyper@linkend}{%
        \hyper@linkstart{link}{#4}{#3}\hyper@linkend
      }%
  \fi
}

% <------------------------------- TITRES DES SECTIONS ----------------------------------->

\titleformat{\section}[block]
{\Fontlukas\bfseries\Huge\color{DarkRed}}
{\thesection}
{1em}
{\Fontlukas\bfseries}

\titleformat{\subsection}[block]
{\Fontlukas\bfseries\Large\color{Green}}
{\thesubsection}
{1em}
{\Fontlukas\bfseries}

\titleformat{\subsubsection}[block]
{\Fontlukas\bfseries\color{CornflowerBlue}}
{\thesubsubsection}
{1em}
{\Fontlukas\bfseries}
\endinput
