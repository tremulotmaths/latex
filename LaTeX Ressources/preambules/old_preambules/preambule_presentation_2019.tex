%packages permettant d'augmenter le nombre de registres de dimension et donc d'éviter les erreurs de compilation dûs aux packages tikz, pstricks and co
\usepackage{etex}

\usefonttheme{serif}
% option [handout] à ajouter pour bloquer les animations et rendre le doc imprimable
% option [mathserif] permet de retrouver la police habituelle pour les formules mathématiques ; cela ne modifie pas la police du texte

%Thèmes Beamer :
\usetheme{Warsaw}

%\usetheme[left,hideallsubsections]{Paloalto}
%\usetheme{PaloAlto}

%Pour le thème PaloAlto
%\useoutertheme{sidebar}
%\useinnertheme[shadow=true]{rounded}
%\usecolortheme{orchid}
%\usecolortheme{whale}
%\setbeamercolor*{frametitle}{parent=palette primary}
%\setbeamerfont{block title}{size={}}

\usepackage{tipa}%alphabet phonétique internationnal

\usepackage[upright]{fourier}% l'option permet d'avoir les majuscules droites dans les formules mathématiques
\usepackage[utf8x]{inputenc}
%\usepackage[latin1,utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english,frenchb]{babel}
\AddThinSpaceBeforeFootnotes % à insérer si on utilise \usepackage[french]{babel}
\FrenchFootnotes % à insérer si on utilise \usepackage[french]{babel}
%s'utilise ainsi : Les Représentants\footnote{ceci est une note} du Peuple Français
\DecimalMathComma %supprime l'espace après la virgule dans un nombre

\usepackage{enumerate} % pour pouvoir changer la numérotation des listes
\usepackage{enumitem}
\frenchbsetup{StandardLists=true}%frenchb ne s'occupera pas des listes
\setenumerate[1]{font=\bfseries\color{blue},label=\arabic*.} % numérotation 1. 2. ...
\setenumerate[2]{font=\bfseries\color{blue},label=\alph*)} % sous-numérotation a) b) ...

\usepackage[scaled=0.875]{helvet}
\renewcommand{\ttdefault}{lmtt}


\usepackage{mathtools,amsmath,amssymb,makeidx}


%redéfinition de fractions, limites, sommes, intégrales, coefficients binomiaux en displaystyle, limites de suites
\let\binomOld\binom
\renewcommand{\binom}{\displaystyle\binomOld}
%\let\fracOld\frac
%\renewcommand{\frac}{\displaystyle\fracOld}
\let\limOld\lim
\renewcommand{\lim}{\displaystyle\limOld}
\newcommand{\limn}{\lim_{n\to +\infty}}
\newcommand{\limm}{\lim_{x\to -\infty}}
\newcommand{\limp}{\lim_{x\to +\infty}}
\newcommand{\limz}{\lim_{x\to 0}}
\newcommand{\limzm}{\lim_{\substack{x \to 0\\ x < 0}}}
\newcommand{\limzp}{\lim_{\substack{x \to 0\\ x > 0}}}
\let\sumOld\sum
\renewcommand{\sum}{\displaystyle\sumOld}
\let\intOld\int
\renewcommand{\int}{\displaystyle\intOld}

%Calligraphie spéciale
\usepackage{mathrsfs}   % Police de maths jolie caligraphie
\newcommand{\calig}[1]{\ensuremath{\mathscr{#1}}}
\newcommand\mtc[1]{\ensuremath{\mathcal{#1}}}


%Nombres complexes
\let\Reold\Re
\renewcommand{\Re}{~\text{Re}~}
\let\Imold\Im
\renewcommand{\Im}{~\text{Im}~}
\newcommand{\ii}{\,\mathrm{i}}

%style des pages
\usepackage{fancybox,cancel}
\usepackage{fancyhdr}
\usepackage{lastpage}
%redéfinition du style plain
\fancypagestyle{plain}{%
\fancyhf{} %vide l'en-tête et le pied de page
%\fancyfoot[C]{\bfseries \thepage / \pageref{LastPage}} %numéro de la page en gras et centré
\fancyfoot[C]{\thepage / \pageref{LastPage}} %numéro de la page centré
\renewcommand{\headrulewidth}{0.2pt}
\renewcommand{\footrulewidth}{0.2pt}}

%___________________________
%===    Raccourcis classe
%------------------------------------------------------
\newcommand\seconde{2\up{nde}\xspace}
\newcommand\premiere{1\up{ère}\xspace}
\newcommand\terminale{T\up{le}\xspace}
\newcommand\stmg{\bsc{Stmg}}
\newcommand\sti{\bsc{Sti2d}}
\newcommand\bat{BAT 1\xspace}
\newcommand\BAT{BAT 2\xspace}
\newcommand\tesspe{TES Spécialité\xspace}

\usepackage{stmaryrd}%\llbracket et \rrbracket % crochets doubles pour intervalles d'entier
%symbole parallèle avec \sslash

\newcommand{\crochets}[2]{\ensuremath{\llbracket #1 ; #2 \rrbracket}}

\newcommand{\intervalleff}[2]{\left[#1\,;#2\right]}
\newcommand{\intervallefo}[2]{\left[#1\,;#2\right[}
\newcommand{\intervalleof}[2]{\left]#1\,;#2\right]}
\newcommand{\intervalleoo}[2]{\left]#1\,;#2\right[}


%Gestion des espaces
%
\newcommand{\pv}{\ensuremath{\: ;}}
\newlength{\EspacePV}
\setlength{\EspacePV}{1em plus 0.5em minus 0.5em}
\newcommand{\qq}{\hspace{\EspacePV} ; \hspace{\EspacePV}}
\newcommand{\qetq}{\hspace{\EspacePV} \text{et} \hspace{\EspacePV}}
\newcommand{\qouq}{\hspace{\EspacePV} \text{ou} \hspace{\EspacePV}}
\newcommand{\qLq}{\hspace{\EspacePV} \Leftarrow \hspace{\EspacePV}}
\newcommand{\qRq}{\hspace{\EspacePV} \Rightarrow \hspace{\EspacePV}}
\newcommand{\qLRq}{\hspace{\EspacePV} \Leftrightarrow \hspace{\EspacePV}}

%TABLEAU
%diminuer la taille des caractères dans un tableau
%Pour aérer un tableau, il est possible de redéfinir l'espacement entre les lignes d'un tableaux et l'espacement entre les colonnes, par exemple :
\usepackage{array}
%\setlength{\tabcolsep}{1cm}
\renewcommand{\arraystretch}{1.5}%augmente la hauteur des lignes des tableaux
%colonnes centrées verticalement et horizontalement permettant d'écrire des paragraphes de largeur fixée du type M{3cm}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}%\arraybackslash permet de continuer à utiliser \\ pour le changement de ligne
%couleurs cellules, colonnes, lignes
\usepackage{color,colortbl}
\usepackage{longtable}%permet d'obtenir des tableaux sur plusieurs pages
\usepackage%[table]
{xcolor}
%\usepackage{arydshln}% pour pouvoir ajouter des lignes horizontales en pointillés avec \hdashline au lieu de \hline
%pose des problèmes d'encadré avec alterqcm

%arbres
\usepackage{pstricks,pst-plot,pst-text,pst-tree,pstricks-add}

%tabvar %packages à ajouter aux précédents
\usepackage{pst-eps,pst-fill,pst-node,pst-math}
%\input tabvar %ajouter le fichier tabvar.tex dans le même dossier que le fichier actuel
%à utiliser uniquement lors d'un tableau de signes et de variations


%INTERLIGNES
\usepackage{setspace}
%s'utilise avec \begin{spacing}{''facteur''}
%   []
%\end{spacing}

%IMAGES
\usepackage{graphicx} %inclure des graphiques
\usepackage{caption}
\usepackage{subfig}

\usepackage{tabularx}
\usepackage{soul} % Pour souligner : \ul
\usepackage{ulem} % Pour souligner double : \uuline
                      % Pour souligner ondulé : \uwave
                      % Pour barrer horizontal : \sout
                      % Pour barrer diagonal : \xout
\usepackage{slashbox}
\usepackage{textcomp}
\usepackage{pst-plot}

\usepackage[np]{numprint}


%ENCADRES
\usepackage{pstricks}
\usepackage{pst-grad}
\usepackage{xkeyval}
\usepackage{pst-coil}
\usepackage{ifthen}
\usepackage{ifpdf}
\usepackage{pst-blur}
\usepackage{bclogo}
%doc ici :
%http://www.tug.org/texlive/Contents/live/texmf-dist/doc/latex/bclogo/bclogo-doc.pdf

%figures tikz
\usepackage{tikz,tkz-base,tkz-fct,tkz-euclide,tkz-tab,tkz-graph,tikz-3dplot}
\usetkzobj{all}
\usetikzlibrary{calc,shapes,arrows,plotmarks,lindenmayersystems,decorations,decorations.markings,decorations.pathmorphing,
decorations.pathreplacing,patterns,positioning,decorations.text,shadows,trees}

\usepackage{pgfplots}


%raccourcis perso
\newcommand\pfr[1]{\fcolorbox{red}{white}{#1}}
\newcommand\coef[1][]{c{\oe}fficient#1\xspace}
\newcommand\abs[1]{\ensuremath{\left\vert #1 \right\vert}}%valeur absolue
\newcommand\Arc[1]{\ensuremath{\wideparen{#1}}}%arc de cercle

%liens hypertexte
%\usepackage[colorlinks=true,linkcolor=black,filecolor=blue,urlcolor=blue]
\usepackage{hyperref}
%\href{mailto:mail@exemple.com}{Mon mail} % Lien email
%\href{http://exemple.com}{Mon site web}  % Lien web
%\href{fichier.pdf}{Mon fichier}          % Lien vers un fichier

\newcommand{\euro}{\texteuro{}~}
\usepackage{eurosym}%avec \EUR{3,12}

%simplification notation norme \norme{}
\newcommand{\norme}[1]{\left\Vert #1\right\Vert}

%Ensembles de nombres
\usepackage{dsfont}
\newcommand{\C}{\mathds C}
\newcommand{\R}{\mathds R}
\newcommand{\Q}{\mathds Q}
\newcommand{\D}{\mathds D}
\newcommand{\Z}{\mathds Z}
\newcommand{\N}{\mathds N}
\newcommand\Ind{\mathds 1} %= fonction indicatrice
\newcommand\p{\mathds P} %= probabilité
\newcommand\E{\mathds E} % Espérance
\newcommand\V{\mathds V} % Variance
\newcommand{\e}{\mathrm {e}}
\newcommand{\dd}{\,\mathrm{d}}
\newcommand{\pgcd}{\text{pgcd}}
\newcommand{\si}{\,\text{si}\,}
\newcommand{\sinon}{\,\text{sinon}\,}
\newcommand{\Id}{\text{Id}}
\newcommand{\Vect}{\text{Vect}}

%simplification de la notation de vecteur \vect{}
\newcommand{\vect}[1]{\mathchoice%
{\overrightarrow{\displaystyle\mathstrut#1\,\,}}%
{\overrightarrow{\textstyle\mathstrut#1\,\,}}%
{\overrightarrow{\scriptstyle\mathstrut#1\,\,}}%
{\overrightarrow{\scriptscriptstyle\mathstrut#1\,\,}}}




%Repères
\def\Oij{$\left(\text{O}\pv\vect{\imath},~\vect{\jmath}\right)$\xspace}
\def\Oijk{$\left(\text{O}\pv\vect{\imath},~ \vect{\jmath},~ \vect{k}\right)$\xspace}
\def\Ouv{$\left(\text{O}\pv\vect{u},~\vect{v}\right)$\xspace}
\def\OIJ{$\left(O\pv I\:,\,J\right)$\xspace}





%Symboles Casio dans les programmes
\usepackage{pifont} % ça c'est pour le retour chariot
\newcommand{\RetourChariot}{\Pisymbol{psy}{191}}
\newcommand{\triangleCasio}{
\begin{tikzpicture}[scale=0.2]
\tkzDefPoint(0,0){A}
\tkzDefPoint(1,0){B}
\tkzDefPoint(1,1){C}
\tkzDrawPolygon[fill](A,B,C)
\end{tikzpicture}
}

%Nécessaire pour l'environnement lslisting
\usepackage{listings}
%\begin{lstlisting}[language=Python]
%# Calcul de la factorielle
%def factorielle(x):
%	if x < 2:
%		return 1
%	else:
%		return x * factorielle(x-1)
%str(5) + "! = " + str(factorielle(5))
%\end{lstlisting}

%Pointillés sur toute la ligne
\usepackage{multido}

\newcommand{\Pointilles}[1][1]{%
\multido{}{#1}{\makebox[\textwidth]{\dotfill}\\[\parskip]
}}
%commandes : \Pointilles ou \Pointilles[4] pour 4 lignes


%textes à trous
\newlength\lgtrou
\newcommand*\trou[1]{%
\settowidth\lgtrou{#1}%
\hspace*{2\lgtrou}}
\setlength\baselineskip{1.2\baselineskip}
%Commande à utiliser : \trou{texte qui sera remplacé par un espace vide}



%%%% Papier millim\'er\'ex*y en cm
\newcommand{\PapierMill}[2]{%
	\begin{pspicture*}(0,0)(#1,#2)
	
	\psgrid[gridwidth=0.3pt,
		gridlabels=0,
		subgriddiv=10,
		subgridcolor=black,
		subgridwidth=0.05pt](0,0)(21,29.7) % il faut \'ere sr
				% que \'e d\'easse, sinon il y a des soucis avec
				% des lignes qui ne vont pas jusqu'au bout
				% \'ecause des arrondis entier de multido
				% pspicture* coupe aux bonnes dimensions
	
	% Grille de 5cm en 5cm
	\psgrid[xunit=5,yunit=5,gridwidth=0.5pt,
		gridlabels=0,
		subgriddiv=0](0,0)(#1,#2)%
		
	\psline[linewidth=1.5pt](0,0)(0,#2)(#1,#2)(#1,0)(0,0)	
	\end{pspicture*}
	}


% Ecrire sur plusieurs colonnes
\usepackage{multicol}
\setlength{\columnseprule}{0.5pt}
%exemple
%\begin{multicols}{3}[Titre sur une seule colonne.]
%   3~colonnes équilibrées, 3~colonnes équilibrées, 3~colonnes équilibrées, 3~colonnes équilibrées
%\end{multicols}
%\begin{multicols}{2}[\section{Titre numéroté.}]
%   blabla sur deux colonnes, c'est plus sérieux. C'est le style qui est généralement utilisé pour écrire des articles.
%saut de colonne forcé : 
%\columnbreak
%djhskjdhjsq
%sdkksqjhd
%\end{multicols}
%Pour ajouter un titre numéroté qui apparaisse sur toute la largeur de la page, il faut utiliser l'option [\section{Titre.}] juste après \begin{multicols}{nb-col}.
%Remarques :
%+ Pour qu'une ligne de séparation apparaisse entre les colonnes, il faut utiliser : \setlength{\columnseprule}{1pt}.

%+ Pour redéfinir la largeur de l'espace inter-colonnes, il faut utiliser \setlength{\columnsep}{30pt}.

%Pour remonter le texte, dans chaque colonne vers le haut : \raggedcolumns qui se tape :\begin{multicols}{2}\raggedcolumns...\columnbreak...\columnbreak\end{multicols}

%Pour supprimer les traits verticaux : \setlength{\columnseprule}{0pt} avant \begin{multicols}{3}...\end{multicols}

%QRcode, codebarre
\usepackage{pst-barcode}
%\begin{pspicture}(2,2)
%	\psbarcode{http://www.latex-howto.be}{eclevel=M}{qrcode}
%\end{pspicture}

%Texte en filigrane
\usepackage{watermark}
%On utilise ensuite les commandes \watermark, \leftwatermark, \rightwatermark ou \thiswatermark qui permettent de définir un filigrane sur toutes les pages, les pages paires, les pages impaires ou juste une page
%Exemple : \thiswatermark {
%\begin{minipage}{0.95\linewidth}
%\vspace{25cm}
%\begin{center}
%\rotatebox{55}{\scalebox{8}{\color[gray]{0.7}\LaTeX}}
%\end{center}
%\end{minipage}
%}

%centrer du texte ou une formule avec moins d'espace autour
\newcommand{\centrer}[1]
{
\smallskip
\centerline{#1}
\smallskip
}


%Permettre la même numérotation beamer
\newcounter{MonPetitCompteur}
\setbeamertemplate{section in toc}{%
\edef\MaDefTemp{\noexpand\setcounter{MonPetitCompteur}{\inserttocsectionnumber}}\MaDefTemp%
\Roman{MonPetitCompteur} - \inserttocsection\par}

\setbeamertemplate{subsection in toc}{%
\leavevmode\leftskip=1.5em%
\edef\MaDefTemp{\noexpand\setcounter{MonPetitCompteur}{\inserttocsubsectionnumber}}\MaDefTemp%
\arabic{MonPetitCompteur}) \inserttocsubsection\par}

%\usepackage{mathtools} %pour l'alignement des termes d'une matrice

% Mise en forme des algorithmes
\usepackage[french,boxed,titlenumbered,lined,longend]{algorithm2e}
  \SetKwIF {Si}{SinonSi}{Sinon}{si}{alors}{sinon\_si}{alors}{fin~si}
 \SetKwFor{Tq}{tant\_que~}{~faire~}{fin~tant\_que}
 \SetKwFor{PourCh}{pour\_chaque }{ faire }{fin pour\_chaque}
 \SetKwInput{Sortie}{Sortie}
  \SetKwInput{Entree}{Entrée}
\newcommand{\Algocmd}[1]{\textsf{\textsc{\textbf{#1}}}}\SetKwSty{Algocmd}
  \newcommand{\AlgCommentaire}[1]{\textsl{\small  #1}} 
  
%Autres packages de Stéphane Pasquet
\usepackage{pas-algo}
\usepackage{tcolorbox}  
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Pages de départ de la présentation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\AtBeginSection{
   \begin{frame}%{\textcolor{red}{\shadowbox{Plan}}}
   \Large%
   \tableofcontents[currentsection,currentsubsection]
   \end{frame}}

\AtBeginSubsection{  
  \begin{frame}%{\textcolor{red}{\shadowbox{Plan}}}
   \Large%
 \tableofcontents[currentsection,currentsubsection]
   \end{frame}}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagecolor{white}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%___________________________
%===    TABLEUR
%------------------------------------------------------
\usepackage{pas-tableur}
\usepackage{xstring}
\usepackage{xkeyval}



%%%%%%%%%Autres commandes
%symbole pour variable aléatoire qui suit une loi
\newcommand{\suit}{\hookrightarrow}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% Les environnements du cours %%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%definition des couleurs
\definecolor{fondpaille}{cmyk}{0,0,0.1,0}%\pagecolor{fondpaille}
\definecolor{gris}{rgb}{0.7,0.7,0.7}
\definecolor{rouge}{rgb}{1,0,0}
\definecolor{bleu}{rgb}{0,0,1}
\definecolor{vert}{rgb}{0,1,0}
\definecolor{deficolor}{HTML}{2D9AFF}
\definecolor{backdeficolor}{HTML}{EDEDED}%{036DD0}%dégradé bleu{666666}%dégradé gris
\definecolor{theocolor}{HTML}{C10CC7}%{HTML}{036DD0}%F4404D%rouge
\definecolor{backtheocolor}{HTML}{D3D3D3}
\definecolor{methcolor}{HTML}{008800}%12BB05}
\definecolor{backmethcolor}{HTML}{FFFACD}
\definecolor{backilluscolor}{HTML}{EDEDED}
\definecolor{sectioncolor}{HTML}{C10CC7}%{B2B2B2}%vert : {HTML}{008800}%{HTML}{2D9AFF}
\definecolor{subsectioncolor}{HTML}{C10CC7}%{B2B2B2}%vert : {HTML}{008800}%{rgb}{0.5,0,0}
\definecolor{subsubsectioncolor}{HTML}{C10CC7}
\definecolor{engcolor}{HTML}{D4D7FE}
\definecolor{exocolor}{rgb}{0,0.6,0}
\definecolor{exosoltitlecolor}{rgb}{0,0.6,0}
\definecolor{titlecolor}{rgb}{1,1,1}

%commande pour enlever les couleurs avant impression
\newcommand{\nocolor}
{\pagecolor{white}
\definecolor{gris}{rgb}{0.7,0.7,0.7}
\definecolor{rouge}{rgb}{0,0,0}
\definecolor{bleu}{rgb}{0,0,0}
\definecolor{vert}{rgb}{0,0,0}
\definecolor{deficolor}{HTML}{B2B2B2}
\definecolor{backdeficolor}{HTML}{EEEEEE}%{036DD0}%dégradé bleu{666666}%dégradé gris
\definecolor{theocolor}{HTML}{B2B2B2}
\definecolor{backtheocolor}{HTML}{EEEEEE}
\definecolor{methcolor}{HTML}{B2B2B2}
\definecolor{backmethcolor}{HTML}{EEEEEE}
\definecolor{backilluscolor}{HTML}{EEEEEE}
\definecolor{sectioncolor}{HTML}{B2B2B2}
\definecolor{subsectioncolor}{HTML}{B2B2B2}
\definecolor{subsubsectioncolor}{HTML}{B2B2B2}
\definecolor{engcolor}{HTML}{EEEEEE}
\definecolor{exocolor}{HTML}{3B3838}
\definecolor{exosoltitlecolor}{rgb}{0,0,0}
\definecolor{titlecolor}{rgb}{0,0,0}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Encadrés pour Propriétés, Théorème, Définitions, exemples, exercices

\usepackage{environ}%pour pouvoir utiliser la commande \NewEnviron

%___________________________
%===    Propriété avec ou sans s et avec ou sans titre
%------------------------------------------------------
%
\NewEnviron{Prop}[2][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Propriété#1~:~#2}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\bigskip
}


%___________________________
%===    Conséquence avec ou sans s et avec ou sans titre
%------------------------------------------------------
%
\NewEnviron{Cons}[2][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Conséquence#1~:~#2}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\bigskip
}


%___________________________
%===    Corolaire avec ou sans titre
%------------------------------------------------------
%
\NewEnviron{Cor}[1][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Corollaire~:~#1}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\bigskip
}


%___________________________
%===    Théorème avec ou sans titre
%------------------------------------------------------
%
\NewEnviron{Thm}[1][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Théorème~:~#1}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\medskip
}


%___________________________
%===    Cadre arrondi coloré
%------------------------------------------------------
%
\NewEnviron{CadreColor}{
\medskip
\begin{tikzpicture}[node distance=0 cm]
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\linewidth-12pt}{\BODY}};
\end{tikzpicture}
%\medskip
}


%___________________________
%===    Cadre arrondi blanc
%------------------------------------------------------
%
\NewEnviron{Cadre}{
\medskip
\begin{tikzpicture}[node distance=0 cm]
\node[draw,very thick,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\linewidth-12pt}{\BODY}};
\end{tikzpicture}
%\medskip
}


%_______________________________________________
%===    Cadre présentation algo et modules
%------------------------------------------------------
%

%utilise le package tcolorbox
\newtcolorbox{mybox}[2][]{colback=red!5!white,
colframe=red!75!black,fonttitle=\bfseries,
colbacktitle=red!85!black,enhanced,
attach boxed title to top left={xshift=2mm,yshift=-2mm},
title=#2,#1}

\newtcolorbox{module}[2][]{colback=red!5!white,
colframe=red!75!black,fonttitle=\bfseries,
colbacktitle=red!85!black,enhanced,
attach boxed title to bottom right={xshift=-5mm,yshift=+2mm},
title=#2,#1}

\NewEnviron{CadreAlgo}[2]{
\begin{minipage}{#1} %largeur de la minipage
\begin{mybox}[colback=blue!10]{#2} %Titre du cadre
\BODY
\end{mybox}
\end{minipage}
}

\NewEnviron{CadreModule}[1]{
\begin{module}[colback=blue!10]{#1}%Catégorie du module
\BODY %Titre de module
\end{module}
}


%___________________________
%===    Règle(s) avec ou sans s et avec sans titre
%------------------------------------------------------
%
\NewEnviron{Regle}[2][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Règle#1~:~#2}};
\node[draw,drop shadow,color=deficolor,very thick,fill=backdeficolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\medskip
}

%___________________________
%===    Définition avec ou sans s et avec sans titre
%------------------------------------------------------
%
\NewEnviron{Defi}[2][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Définition#1~:~#2}};
\node[draw,drop shadow,color=deficolor,very thick,fill=backdeficolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\medskip
}

%___________________________
%===    Méthode avec ou sans s et avec sans titre
%------------------------------------------------------
%
\NewEnviron{Methode}[2][]{
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Méthode#1~:~#2}};
\node[draw,drop shadow,color=methcolor,very thick,fill=backmethcolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\medskip
}


%___________________________
%===    Redéfinition de la commande \chapter{•}
%------------------------------------------------------
%
\makeatletter

\renewcommand{\@makechapterhead}[1]{
\begin{tikzpicture}
\node[fill=theocolor,rectangle,rounded corners=5pt]{%
\begin{minipage}{\linewidth}
\begin{center}
\vspace*{9pt}
\textcolor{titlecolor}{\Large \textsc{\textbf{Chapitre \thechapter \ : \ #1}}}
\vspace*{9pt}
\end{center}
\end{minipage}
};\end{tikzpicture}
}

\makeatother


%___________________________
%===    Exemple avec ou sans s et avec ou sans titre
%------------------------------------------------------
%
\NewEnviron{Exemple}[2][]{
\textbf{\large{Exemple#1~:~#2}}\par
\BODY
\medskip
}

%___________________________
%===    Remarque avec ou sans s
%------------------------------------------------------
%
\NewEnviron{Rmq}[1][]{
\textbf{\large{Remarque#1 :}}\par
\BODY
\medskip
}

%___________________________
%===    Remarques numérotées R1, R2, etc...
%------------------------------------------------------
%
\newcounter{rem}\newcommand{\rem}{\refstepcounter{rem}\textbf{R \therem \ :}\xspace}

%___________________________
%===    Exercices du contrôle numérotés
%------------------------------------------------------
%
\newcounter{exercice}
\NewEnviron{Exercice}[1][]{
\refstepcounter{exercice}\textbf{\large{Exercice \theexercice \ :}}\hfill \textbf{#1}\par
\BODY
\medskip
}


%___________________________
%===    Environnements CNED
%------------------------------------------------------
%
\newcounter{propcned}
\NewEnviron{PropCNED}[1][]{\refstepcounter{propcned}
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Propriété \thepropcned ~:~#1}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\bigskip
}

\newcounter{defcned}
\NewEnviron{DefCNED}[1][]{\refstepcounter{defcned}
\begin{tikzpicture}[node distance=0 cm]
\node[fill=theocolor,rounded corners=5pt,anchor=south west] (theorem) at (0,0)
{\textcolor{titlecolor}{\bfseries Définition \thedefcned ~:~#1}};
\node[draw,drop shadow,color=theocolor,very thick,fill=backtheocolor,rounded corners=5pt,anchor=north west] at(0,-0.02)
{\black\parbox{\columnwidth-12pt}{\BODY}};
\end{tikzpicture}
\bigskip
}

\newcounter{exemplecned}
\NewEnviron{ExempleCNED}[1][]{\refstepcounter{exemplecned}
\textbf{\large{Exemple \theexemplecned~:~#1}}\par
\BODY
\medskip
}

\newcounter{rmqcned}
\NewEnviron{RmqCNED}[1][]{\refstepcounter{rmqcned}
\textbf{\large{Remarque \thermqcned~:~#1}}\par
\BODY
\medskip
}

%___________________________
%===    Exercices du contrôle numérotés en Anglais
%------------------------------------------------------
%
\newcounter{exercise}
\NewEnviron{Exercise}[1][]{
\refstepcounter{exercise}\textbf{\large{Exercise \#\theexercise:}}\hfill \textbf{#1}\par
\BODY
\medskip
}

%___________________________
%===    Exercices non numérotés
%------------------------------------------------------
%
\NewEnviron{Exo}[1][]{
\textbf{\large{Exercice #1 \ :}}\par
\BODY
\medskip
}

%___________________________
%===    Exercices non numérotés en Anglais
%------------------------------------------------------
%
\NewEnviron{Exoa}[1][]{
\textbf{\large{Exercise #1 \ :}}\par
\BODY
\medskip
}

%___________________________
%===    Démonstration
%------------------------------------------------------
\NewEnviron{Demo}[1][]{%
\textit{\textbf{Démonstration #1}}\par
\BODY
\strut\hfill$\square$
\medskip
}

%___________________________
%===    Commandes perso
%------------------------------------------------------




%Ancienne commande chapitre
\newcommand{\chapitre}[1]{
\begin{tikzpicture}
\node[fill=sectioncolor,rectangle,rounded corners=5pt]{%
\begin{minipage}{\linewidth}
\begin{center}
\vspace*{9pt}
\textcolor{titlecolor}{\Large \textsc{\textbf{#1}}}
\vspace*{9pt}
\end{center}
\end{minipage}
};
\end{tikzpicture}
\bigskip
}

%Pour les fiches : commande de Cécile
\newcommand{\Fiche}[2]{%
\begin{tikzpicture}
	\node[draw, color=blue,fill=white,rectangle,rounded corners=5pt]{%
	\begin{minipage}{\linewidth}
		\begin{center}
			\vspace*{9pt}
			\textcolor{blue}{\Large \textsc{\textbf{Fiche~#1\ :\ #2}}}
			\vspace*{7pt}
		\end{center}
	\end{minipage}
	};
\end{tikzpicture}
}%

\pagecolor{white}%couleur du fond de page


%centrer du texte ou une formule avec moins d'espace autour
\newcommand{\centrer}[1]
{
\vspace*{-12pt}
\begin{center}
#1
\end{center}
\vspace*{-12pt}
}

%Pour pouvoir utiliser l'environnement verbatim
\usepackage{verbatim}

%Panneau danger (nécessite le package pstricks)
\def\danger{\begingroup
\psset{unit=1ex}%
\begin{pspicture}(0,0)(3,3)
\pspolygon[linearc=0.2,linewidth=0.12,linecolor=red](0,0)(1.5,2.6)(3,0)
\psellipse*(1.5,1.33)(0.14,0.75)\pscircle*(1.5,0.3){0.15}\end{pspicture}
\endgroup}%

\newcommand{\cad}{c'est-à-dire }


%Fonctions hyperboliques

\newcommand{\ch}{\text{ch}}
\newcommand{\sh}{\text{sh}}
\renewcommand{\th}{\text{th}}
\newcommand{\argch}{\text{argch}}
\newcommand{\argsh}{\text{argsh}}
\newcommand{\argth}{\text{argth}}


%___________________________
%===    Nouvelles commandes pour documents venant de Sesamath
%------------------------------------------------------
%
\definecolor{CyanTikz40}{cmyk}{.4,0,0,0}
\definecolor{CyanTikz20}{cmyk}{.2,0,0,0}

\definecolor{B1prime}                {cmyk}{0.00, 1.00, 0.00, 0.50}
\definecolor{H1prime}                {cmyk}{0.50, 0.00, 1.00, 0.00}

\definecolor{FootFonctionColor}{cmyk}{0.50, 0.00, 0.00, 0.00}
\definecolor{FootGeometrieColor}{cmyk}{0.40, 0.40, 0.00, 0.00}
\definecolor{FootStatistiqueColor}{cmyk}{0.30, 0.48, 0.00, 0.10}
\definecolor{FootStatistiqueOLDColor}{cmyk}{0.48, 0.30, 0.10, 0.00}
\definecolor{FootStatistique*Color}{cmyk}{0.20, 0.00, 0.00, 0.00}
\definecolor{ActiviteFootColor}{cmyk}{0.50, 0.00, 0.25, 0.00}
\definecolor{CoursFootColor}{cmyk}{0.15, 0.00, 0.00, 0.03}
\definecolor{ExoBaseFootColor}{cmyk}{0.00, 0.25, 0.50, 0.00}
\definecolor{ExoApprFootColor}{cmyk}{0.00, 0.25, 0.50, 0.00}
%\colorlet{ConnFootColor}{F2}
\definecolor{TPFootColor}{cmyk}{0.00, 0.30, 0.00, 0.10}
\definecolor{RecreationFootColor}{cmyk}{0.20, 0.00, 0.50, 0.05}

\definecolor{Blanc}             {cmyk}{0.00, 0.00, 0.00, 0.00}
\definecolor{Gris1}             {cmyk}{0.00, 0.00, 0.00, 0.20}
\definecolor{Gris2}             {cmyk}{0.00, 0.00, 0.00, 0.40}
\definecolor{Gris3}             {cmyk}{0.00, 0.00, 0.00, 0.50}
\definecolor{Noir}              {cmyk}{0.00, 0.00, 0.00, 1.00}
\definecolor{A1}              {cmyk}{0.33, 1.00, 0.00, 0.40}
\definecolor{F1}              {cmyk}{0.00, 1.00, 1.00, 0.00}
\definecolor{C1}              {cmyk}{0.00, 1.00, 0.00, 0.50}
\definecolor{G1}              {cmyk}{0.00, 0.00, 0.00, 0.20}
\definecolor{D1}              {cmyk}{0.00, 0.22, 0.49, 0.69}%bitume
\definecolor{J1}              {cmyk}{0.00, 0.34, 1.00, 0.02}%orangé


\tikzstyle{general}=[line width=0.3mm, x=1cm, y=1cm,line cap=round, line join=round]
\tikzstyle{quadrillage}=[line width=0.3mm, color=CyanTikz40]
\tikzstyle{quadrillageNIV2}=[line width=0.3mm, color=CyanTikz20]
\tikzstyle{quadrillage55}=[line width=0.3mm, color=CyanTikz40, xstep=0.5, ystep=0.5]
\tikzstyle{cote}=[line width=0.3mm, <->,>=stealth]
\tikzstyle{epais}=[line width=0.5mm, line cap=butt]
\tikzstyle{tres epais}=[line width=0.8mm, line cap=butt]
\tikzstyle{axe}=[line width=0.6mm, ->,>=stealth, color=blue, line cap=rect]
\newcommand{\quadrillageSeyes}[2]{\draw[line width=0.3mm, color=A1!10, ystep=0.2, xstep=0.8] #1 grid #2;
\draw[line width=0.3mm, color=A1!30, xstep=0.8, ystep=0.8] #1 grid #2; }
\newcommand{\axeX}[4][0]{\draw[axe] (#2,#1)--(#3,#1); \foreach \x in {#4} {\draw (\x,#1) node {\small $+$}; \draw (\x,#1) node[below] {\small $\x$};}}
\newcommand{\axeY}[4][0]{\draw[axe] (#1,#2)--(#1,#3); \foreach \y in {#4} {\draw (#1, \y) node {\small $+$}; \draw (#1, \y) node[left] {\small $\y$};}}
\newcommand{\axeOI}[3][0]{\draw[axe] (#2,#1)--(#3,#1);  \draw (1,#1) node {\small $+$}; \draw (1,#1) node[below] {\small $I$};}
\newcommand{\axeOJ}[3][0]{\draw[axe] (#1,#2)--(#1,#3); \draw (#1, 1) node {\small $+$}; \draw (#1, 1) node[left] {\small $J$};}
\newcommand{\axeXgraduation}[2][0]{\foreach \x in {#2} {\draw (\x,#1) node {\small $+$};}}
\newcommand{\axeYgraduation}[2][0]{\foreach \y in {#2} {\draw (#1, \y) node {\small $+$}; }}
\newcommand{\origine}{\draw (0,0) node[below left] {\small $0$};}
\newcommand{\origineO}{\draw (0,0) node[below left] {$O$};}
\newcommand{\point}[4]{\draw (#1,#2) node[#4] {$#3$};}
\newcommand{\pointGraphique}[4]{\draw (#1,#2) node[#4] {$#3$};
\draw (#1,#2) node[scale=1.5] {$\times$};}
\newcommand{\pointFigure}[4]{\draw (#1,#2) node[#4] {$#3$};
\draw (#1,#2) node[scale=1.5] {$\times$};}
\newcommand{\pointC}[3]{\draw (#1) node[#3] {$#2$};}
\newcommand{\pointCGraphique}[3]{\draw (#1) node[#3] {$#2$};
\draw (#1) node[scale=1.5] {$\times$};}
\newcommand{\pointCFigure}[3]{\draw (#1) node[#3] {$#2$};
\draw (#1) node[scale=1.5] {$\times$};}


\newcommand{\expco}[1]{\e^{#1}}
\newcommand{\expcopi}[2]{\e^{\ii \frac{{#1\pi}}{#2}}}
\newcommand{\expcopim}[2]{\e^{-\ii \frac{{#1\pi}}{#2}}}
\newcommand{\expcopimul}[3]{\e^{{ #1\ii} \frac{{#2\pi}}{#3}}}
\newcommand{\cj}{\mathrm{j}}
\newcommand{\ci}{\ii}


%augmenter l'espace au-dessus ou en-dessous d'une fraction
\makeatletter
\newcommand*\Strut[1][1]{%
  \leavevmode
  \vrule \@height #1\ht\strutbox
         \@depth #1\dp\strutbox
         \@width\z@
}
\newcommand*\TopStrut[1][1]{%
  \leavevmode
  \vrule \@height #1\ht\strutbox
         \@depth \z@
         \@width \z@
}
\newcommand*\BotStrut[1][1]{%
  \leavevmode
  \vrule \@height \z@
         \@depth #1\dp\strutbox
         \@width \z@
}
\makeatother

%exemple
%Résoudre: $  \dfrac{ \TopStrut 3 x -1} { \BotStrut x + 2} < 3$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%--------------------- PRESENTATION SECTIONS
\usepackage{titlesec}
\setcounter{secnumdepth}{3}
\makeatletter

% couleurs section
\definecolor{section@title@color}{cmyk}{1,0.2,0.3,0.1}
\definecolor{subsection@title@color}{cmyk}{0,0.6,0.9,0}
\definecolor{subsubsection@title@color}{cmyk}{1,0.2,0.3,0.1}
\definecolor{shadow@color}{cmyk}{.07,0,0,0.49}

% fontes section
\def\sectiontitle@font{\fontfamily{ppl}\fontseries{bx}\selectfont}
%\def\subsectiontitle@font{\fontfamily{ppl}\fontseries{bx}\selectfont}
%\def\subsubsectiontitle@font{\fontfamily{ppl}\fontseries{bx}\selectfont}

% Décalages numéro de sections / titres des sections
\newlength\decalnumsec
\newlength\decalnumsubsec
\newlength\decalnumsubsubsec
\setlength{\decalnumsec}{-0.5em}
\setlength{\decalnumsubsec}{-0.5em}
\setlength{\decalnumsubsubsec}{-0.5em}
\newlength\decalxtitlesec
\newlength\decalxtitlesubsec
\newlength\decalxtitlesubsubsec
\setlength{\decalxtitlesec}{-2.45em}
\setlength{\decalxtitlesubsec}{-1em}
\setlength{\decalxtitlesubsubsec}{0.45em}

% Espace entre le numéro de section et le titre
\newlength\spacetitlesec
\newlength\spacetitlesubsec
\newlength\spacetitlesubsubsec
\setlength{\spacetitlesec}{0.2em}
\setlength{\spacetitlesubsec}{0.2em}
\setlength{\spacetitlesubsubsec}{0.2em}

%%%%%%%%%%%%% Titre de section

\renewcommand{\thesection}{\Roman{section}}
\titleformat{\section}[block]
{%
	\hspace*{\decalxtitlesec}
	\bfseries\large
	\color{section@title@color}
	\sectiontitle@font
}
{
\raisebox{\decalnumsec}
{%
\begin{tikzpicture}
\node (numsec) {\sectiontitle@font\thesection};
\fill[rounded corners=2pt,fill=shadow@color] ($(numsec.north west)+(2pt,-2pt)$) -- ($(numsec.north east)+(1mm,0mm)+(2pt,-2pt)$) -- ($(numsec.south east)+(2pt,-2pt)$) -- ($(numsec.south west)+(-1mm,0)+(2pt,-2pt)$) -- cycle;
\fill[rounded corners=2pt,fill=section@title@color] (numsec.north west) -- ($(numsec.north east)+(1mm,0mm)$) -- (numsec.south east) -- ($(numsec.south west)+(-1mm,0)$) -- cycle;
\node[white] at (numsec) {\sectiontitle@font\thesection};
\end{tikzpicture}
}
}
{\spacetitlesec}
{}

%%%%%%%%%%%%% Titre de subsection

\renewcommand{\thesubsection}{\Alph{subsection}}
\titleformat{\subsection}[block]
{%
	\hspace*{\decalxtitlesubsec}
	\bfseries
	\color{subsection@title@color}
	\sectiontitle@font
}
{
	\raisebox{\decalnumsubsec}
	{%
	\begin{tikzpicture}
	\node (numsubsec) {\sectiontitle@font\thesubsection};
	\fill[rounded corners=2pt,fill=shadow@color] ($(numsubsec.north west)+(2pt,-2pt)$) -- ($(numsubsec.north east)+(1mm,0mm)+(2pt,-2pt)$) -- ($(numsubsec.south east)+(2pt,-2pt)$) -- ($(numsubsec.south west)+(-1mm,0)+(2pt,-2pt)$) -- cycle;
	\fill[rounded corners=2pt,fill=subsection@title@color] (numsubsec.north west) -- ($(numsubsec.north east)+(1mm,0mm)$) -- (numsubsec.south east) -- ($(numsubsec.south west)+(-1mm,0)$) -- cycle;
	\node[white] at (numsubsec) {\sectiontitle@font\thesubsection};
	\end{tikzpicture}
	}
}
{%
	\spacetitlesubsec
}
{} 

%%%%%%%%%%%%% Titre de subsubsection

\renewcommand{\thesubsubsection}{\arabic{subsubsection}}
\titleformat{\subsubsection}[block]
{%
	\hspace*{\decalxtitlesubsubsec}
	\bfseries
	\color{section@title@color}
	\sectiontitle@font
}
{
	\raisebox{\decalnumsubsubsec}
	{%
	\begin{tikzpicture}
	\node (numsubsubsec) {\sectiontitle@font\thesubsubsection};
	\fill[rounded corners=2pt,fill=shadow@color] ($(numsubsubsec.north west)+(2pt,-2pt)$) -- ($(numsubsubsec.north east)+(1mm,0mm)+(2pt,-2pt)$) -- ($(numsubsubsec.south east)+(2pt,-2pt)$) -- ($(numsubsubsec.south west)+(-1mm,0)+(2pt,-2pt)$) -- cycle;
	\fill[rounded corners=2pt,fill=subsubsection@title@color] (numsubsubsec.north west) -- ($(numsubsubsec.north east)+(1mm,0mm)$) -- (numsubsubsec.south east) -- ($(numsubsubsec.south west)+(-1mm,0)$) -- cycle;
	\node[white] at (numsubsubsec) {\sectiontitle@font\thesubsubsection};
	\end{tikzpicture}
	}
}
{\spacetitlesubsubsec}
{} 

\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Symbole pour les probabilités
\DeclareMathOperator{\Prob}{\mathbb{P}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{bbding}
%permet d'utiliser \Checkmark et \XSolidBrush

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%